(()=>{var e=browser.runtime.connectNative("spookfox");e.onDisconnect.addListener((e=>{console.log("Disconnected from Native APP"),e.error&&console.error("Disconnected due to error",e.error)})),e.onMessage.addListener((async n=>{if(n.payload)try{const t=JSON.parse(n.payload);switch(t.type){case"GET_ACTIVE_TAB":const n=await r();return e.postMessage(n);case"GET_ALL_TABS":const s=await o();return e.postMessage(s);default:console.warn(`Unknown action [action=${JSON.stringify(t)}]`)}}catch(e){console.err(`Bad message payload [err=${e}, msg=${n.payload}]`)}else console.warn("Unknown message:",n)}));const r=async()=>{const e=await browser.tabs.query({currentWindow:!0,active:!0});if(!e.length)return{type:"Error",message:"No active tabs found"};const r=e[0];return{url:r.url,title:r.title}},o=async()=>(await browser.tabs.query({currentWindow:!0})).map((e=>({url:e.url,title:e.title})));browser.browserAction.onClicked.addListener((async()=>{console.warn("TABS",await r())}))})();
//# sourceMappingURL=background.js.map
