(()=>{const e=e=>({id:e.id,title:e.title,url:e.url,isPinned:e.pinned}),r=async()=>(await browser.tabs.query({currentWindow:!0})).map(e),o=async e=>{let r=null;try{r=e.tabId&&await browser.tabs.get(parseInt(e.tabId,10))}catch(e){}return r?browser.tabs.update(r.id,{active:!0}):browser.tabs.create({url:e.url}),{}},a={GET_ACTIVE_TAB:async()=>{const r=await browser.tabs.query({currentWindow:!0,active:!0});return r.length?e(r[0]):{type:"Error",message:"No active tabs found"}},GET_ALL_TABS:r,OPEN_TAB:o,OPEN_TABS:async e=>(e.forEach(o),{}),SEARCH_FOR:async e=>(browser.search.search({query:e}),{})};(()=>{const e=browser.runtime.connectNative("spookfox");e.onDisconnect.addListener((e=>{console.log("Disconnected from Native APP"),e.error&&console.error("Disconnected due to error",e.error)})),e.onMessage.addListener((async r=>{if("Error"!==r.type)if(r.payload)try{const o=JSON.parse(r.payload),n=a[o.type];if(n){const r=await n(o.payload);return e.postMessage(r)}console.warn(`Unknown action [action=${JSON.stringify(o)}]`)}catch(e){console.error(`Bad message payload [err=${e}, msg=${r.payload}]`)}else console.warn("Unknown message:",r);else console.error("spookfox-native faced an error, [err=",r.payload,"]")})),browser.browserAction.onClicked.addListener((async()=>{console.warn("TABS",await r())}))})()})();
//# sourceMappingURL=background.js.map
